var x=(n,e)=>{e:for(let r=0;r<=n.length-e.length;r++){for(let t=0;t<e.length;t++)if(n[r+t]!==e[t])continue e;return r}return-1},o=x;var c=new TextDecoder,y=new TextEncoder,s=y.encode(`\r
`),h=[9,32],g=n=>{let e=0,r=[];for(;(e=o(n,s))!==-1&&e!==0;){let a=n.indexOf(58);if(a===-1)throw new Error("Invalid header");let l=c.decode(n.subarray(0,a));for(;h.includes(n[e+2]);){let d=o(n.subarray(e+2),s);if(d<1)break;e+=2+d}let p=c.decode(n.subarray(a+1,e)).replace(/\r\n/g,"");r.push([l,p]),n=n.subarray(e+s.length)}let t=new Headers(r);return t.has("content-transfer-encoding")||t.set("content-transfer-encoding","7bit"),t.has("content-type")||t.set("content-type","text/plain; charset=us-ascii"),{headers:t,body:e===-1?null:n.subarray(e+s.length)}},i=g;export{i as default,i as parseMessage};
